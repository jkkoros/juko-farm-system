<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Search Farmers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #11998e, #38ef7d); min-height: 100vh; }
        .card { max-width: 900px; margin: 50px auto; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.3); }
        .header { background: #155724; color: white; padding: 30px; text-align: center; border-radius: 25px 25px 0 0; }
    </style>
</head>
<body>
<div class="card">
    <div class="header">
        <h1 class="display-5 fw-bold">SEARCH FARMERS</h1>
    </div>
    <div class="card-body p-5 bg-white">
        <form th:action="@{/farmers/search}" method="get">
            <div class="input-group input-group-lg mb-4">
                <input type="text" name="q" class="form-control" placeholder="Search by name or phone..." th:value="${query}" autofocus />
                <button type="submit" class="btn btn-success">Search</button>
            </div>
        </form>

        <div th:if="${results != null && !#lists.isEmpty(results)}">
            <table class="table table-striped table-hover">
                <thead class="table-success">
                    <tr><th>ID</th><th>Name</th><th>Phone</th><th>Action</th></tr>
                </thead>
                <tbody>
                    <tr th:each="f : ${results}">
                        <td><strong th:text="${f.farmerId}"></strong></td>
                        <td th:text="${f.buildFullName()}"></td>
                        <td th:text="${f.phone ?: 'â€”'}"></td>
                        <td><a th:href="@{'/farmers/card/' + ${f.farmerId}}" target="_blank" class="btn btn-primary btn-sm">Print Card</a></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div th:if="${results != null && #lists.isEmpty(results)}" class="text-center text-muted py-5">
            No results found for "<strong th:text="${query}"></strong>"
        </div>

        <div class="text-center mt-4">
            <a th:href="@{/farmers/register}" class="btn btn-success btn-lg me-3">Register New</a>
            <a th:href="@{/manager/dashboard}" class="btn btn-secondary btn-lg">Back</a>
        </div>
    </div>
</div>
</body>
</html>